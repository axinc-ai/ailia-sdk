<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ailia_tracker: How to use the API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ailia_tracker
   &#160;<span id="projectnumber">1.1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">How to use the API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md4"></a>
Overview of ailia Tracker API</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
Basic usage</h2>
<p>With ailia Trakcer, you can create an instance with <code>ailiaTrackerCreate</code>, then set tracking targets using results of object detection with <code>ailiaTrackerAddTarget</code>, execute <code>ailiaTrackerCompute</code> to track objects, and get tracking results with <code>ailiaTrackerGetObject</code>.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;ctime&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;opencv2/opencv.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#undef UNICODE</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;ailia.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ailia_detector.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="ailia__tracker_8h.html">ailia_tracker.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;detector_utils.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;utils.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;webcamera_utils.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// ======================</span></div>
<div class="line"><span class="comment">// Parameters</span></div>
<div class="line"><span class="comment">// ======================</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define WEIGHT_PATH &quot;yolox_s.opt.onnx&quot;</span></div>
<div class="line"><span class="preprocessor">#define MODEL_PATH &quot;yolox_s.opt.onnx.prototxt&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define MODEL_INPUT_WIDTH 640</span></div>
<div class="line"><span class="preprocessor">#define MODEL_INPUT_HEIGHT 640</span></div>
<div class="line"><span class="preprocessor">#define IMAGE_WIDTH 640  </span><span class="comment">// for video mode</span></div>
<div class="line"><span class="preprocessor">#define IMAGE_HEIGHT 640 </span><span class="comment">// for video mode</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define TARGET_CATEGORY 0   </span><span class="comment">// person</span></div>
<div class="line"><span class="preprocessor">#define THRESHOLD 0.4f</span></div>
<div class="line"><span class="preprocessor">#define IOU 0.45f</span></div>
<div class="line"><span class="preprocessor">#define IS_VERTICAL_THRESHOLD 1.6</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define RECTANGLE_BORDER_SIZE 2</span></div>
<div class="line"><span class="preprocessor">#define TEXT_COLOR cv::Scalar(0, 255, 0)</span></div>
<div class="line"><span class="preprocessor">#define TEXT_SIZE 1.0</span></div>
<div class="line"><span class="preprocessor">#define TEXT_BORDER_SIZE 1</span></div>
<div class="line"><span class="preprocessor">#define TEXT_FONT cv::FONT_HERSHEY_SIMPLEX</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> useWebCamera(<span class="keyword">false</span>);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> saveOutputVideo(<span class="keyword">false</span>);</div>
<div class="line"><span class="keyword">static</span> std::string inputVideoPath;</div>
<div class="line"><span class="keyword">static</span> std::string outputVideoPath;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> args_env_id = -1;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> main(<span class="keywordtype">void</span>){</div>
<div class="line">    std::map&lt;unsigned int, cv::Scalar&gt; id2Color;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create AILIANetwork instance</span></div>
<div class="line">    AILIANetwork *ailia;</div>
<div class="line">    <span class="comment">// Create AILIADetector instance</span></div>
<div class="line">    AILIADetector *detector;</div>
<div class="line"> </div>
<div class="line">    AILIATracker *ailiaTracker = <span class="keyword">nullptr</span>;</div>
<div class="line">    <a class="code" href="struct__AILIATrackerSettings.html">AILIATrackerSettings</a> settings;</div>
<div class="line">    settings.<a class="code" href="struct__AILIATrackerSettings.html#a8c843247b100c3ceb2d4935dbc3e5f77">score_threshold</a> = 0.1f;</div>
<div class="line">    settings.<a class="code" href="struct__AILIATrackerSettings.html#a609f06d183fc96c21673e5305b4fb09c">nms_threshold</a> = 0.7f;</div>
<div class="line">    settings.<a class="code" href="struct__AILIATrackerSettings.html#affd84c6b8a0772cbddbfd29bd88822c0">track_threshold</a> = 0.5f;</div>
<div class="line">    settings.<a class="code" href="struct__AILIATrackerSettings.html#ae094831bfd443dbd115bf5f64a9d1d5a">track_buffer</a> = 30;</div>
<div class="line">    settings.<a class="code" href="struct__AILIATrackerSettings.html#add8c33cfbfb077419bfeeec4e71e229a">match_threshold</a> = 0.8f;</div>
<div class="line">    status = <a class="code" href="ailia__tracker_8h.html#aae45adaf13ec56adb65810527204ef06">ailiaTrackerCreate</a>(&amp;ailiaTracker,</div>
<div class="line">                                <a class="code" href="ailia__tracker_8h.html#a109e7b4c6158ac1de4915fd2fc3c7bb2">AILIA_TRACKER_ALGORITHM_BYTE_TRACK</a>, &amp;settings, <a class="code" href="ailia__tracker_8h.html#af5dc9c6782b9179c72444519cff8d2de">AILIA_TRACKER_SETTINGS_VERSION</a>, <a class="code" href="ailia__tracker_8h.html#a84ba2dbe1f25e2b761f818464ab26bee">AILIA_TRACKER_FLAG_NONE</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create cv::VideoCapture</span></div>
<div class="line">    cv::VideoCapture capture;</div>
<div class="line">    <span class="keywordflow">if</span> (useWebCamera) {</div>
<div class="line">        capture = cv::VideoCapture(atoi(inputVideoPath.c_str()));</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        capture = cv::VideoCapture(inputVideoPath.c_str());</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create cv::VideoWriter</span></div>
<div class="line">    cv::VideoWriter writer;</div>
<div class="line">    <span class="keywordflow">if</span>(saveOutputVideo){</div>
<div class="line">        <span class="keywordtype">int</span> fourcc = cv::VideoWriter::fourcc(<span class="charliteral">&#39;M&#39;</span>,<span class="charliteral">&#39;P&#39;</span>,<span class="charliteral">&#39;4&#39;</span>,<span class="charliteral">&#39;V&#39;</span>);</div>
<div class="line">        writer = cv::VideoWriter(</div>
<div class="line">            outputVideoPath.c_str(), fourcc, capture.get(cv::CAP_PROP_FPS), cv::Size(IMAGE_WIDTH, IMAGE_HEIGHT)</div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <span class="comment">// Read frame</span></div>
<div class="line">        cv::Mat frame, resized_img, img;</div>
<div class="line">        capture &gt;&gt; frame;</div>
<div class="line">        <span class="keywordflow">if</span> ((<span class="keywordtype">char</span>)cv::waitKey(1) == <span class="charliteral">&#39;q&#39;</span> || frame.empty()) {</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        adjust_frame_size(frame, resized_img, IMAGE_WIDTH, IMAGE_HEIGHT);</div>
<div class="line">        cv::cvtColor(resized_img, img, cv::COLOR_BGR2BGRA);</div>
<div class="line">        <span class="comment">// Execute object detection</span></div>
<div class="line">        ailiaDetectorCompute(detector, img.data, MODEL_INPUT_WIDTH * 4,</div>
<div class="line">                             MODEL_INPUT_WIDTH, MODEL_INPUT_HEIGHT,</div>
<div class="line">                             AILIA_IMAGE_FORMAT_BGRA, THRESHOLD, IOU);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> objCounts;</div>
<div class="line">        ailiaDetectorGetObjectCount(detector, &amp;objCounts);</div>
<div class="line">        AILIADetectorObject *ailiaDetectorObject = <span class="keyword">new</span> AILIADetectorObject[objCounts];</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; objCounts; i++) {</div>
<div class="line">            ailiaDetectorGetObject(detector, &amp;ailiaDetectorObject[i], i,</div>
<div class="line">                                   AILIA_DETECTOR_OBJECT_VERSION);</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// Set object detection result to ailiaTracker</span></div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;objCounts; i++){</div>
<div class="line">            <a class="code" href="ailia__tracker_8h.html#a49d9807a95a319ba5e305358d50a413e">ailiaTrackerAddTarget</a>(ailiaTracker, &amp;ailiaDetectorObject[i], AILIA_DETECTOR_OBJECT_VERSION);</div>
<div class="line">        }</div>
<div class="line">        <span class="keyword">delete</span>[] ailiaDetectorObject;</div>
<div class="line">        <span class="comment">// Execute tracking</span></div>
<div class="line">        <a class="code" href="ailia__tracker_8h.html#ae155bdb6d119771ae2cb32df912b6683">ailiaTrackerCompute</a>(ailiaTracker);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> onlineSize;</div>
<div class="line">        <span class="comment">// Get the number of objects detected by tracker</span></div>
<div class="line">        <a class="code" href="ailia__tracker_8h.html#a7097f5ca5700fbc76152d655cf321077">ailiaTrackerGetObjectCount</a>(ailiaTracker, &amp;onlineSize);</div>
<div class="line">        <a class="code" href="struct__AILIATrackerObject.html">AILIATrackerObject</a> *ailiaTrackerObject = <span class="keyword">new</span> <a class="code" href="struct__AILIATrackerObject.html">AILIATrackerObject</a>[onlineSize];</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Get trakcing result</span></div>
<div class="line">        <a class="code" href="ailia__tracker_8h.html#af7a0d43b216df3d8288add419c8c3a05">ailiaTrackerGetObject</a>(ailiaTracker, ailiaTrackerObject, 1);</div>
<div class="line"> </div>
<div class="line">        cv::Point leftUpperPoint, rightBottomPoint;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Draw bounding boxes</span></div>
<div class="line">        cv::Scalar color;</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; onlineSize; i++) {</div>
<div class="line">            <a class="code" href="struct__AILIATrackerObject.html">AILIATrackerObject</a> obj = ailiaTrackerObject[i];</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span>(obj.<a class="code" href="struct__AILIATrackerObject.html#a3ebe3b644806e6c56c0ce3e1706a942d">category</a> != TARGET_CATEGORY){</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span> = obj.<a class="code" href="struct__AILIATrackerObject.html#ade1116e10ae8e26b2327f8b1e8911562">id</a>;</div>
<div class="line">            <span class="keywordflow">if</span>(id2Color.find(<span class="keywordtype">id</span>) != id2Color.end()){</div>
<div class="line">                color = id2Color[id];</div>
<div class="line">            }<span class="keywordflow">else</span>{</div>
<div class="line">                <span class="keywordtype">int</span> b = rand() % 256;</div>
<div class="line">                <span class="keywordtype">int</span> g = rand() % 256;</div>
<div class="line">                <span class="keywordtype">int</span> r = rand() % 256;</div>
<div class="line">                color = cv::Scalar(b, g, r);</div>
<div class="line">                id2Color.insert(std::make_pair(<span class="keywordtype">id</span>, color));</div>
<div class="line">            }</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(obj.<a class="code" href="struct__AILIATrackerObject.html#a15fe8922813314eca61f527084eb2a97">x</a> * IMAGE_WIDTH);</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(obj.<a class="code" href="struct__AILIATrackerObject.html#ab0c76416c234516e7f313644b956ffae">y</a> * IMAGE_HEIGHT);</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> width = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(obj.<a class="code" href="struct__AILIATrackerObject.html#a47cb64467afdff2077ebc6b81d7b1d30">w</a> * IMAGE_WIDTH);</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> height = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(obj.<a class="code" href="struct__AILIATrackerObject.html#a3e67b6d20003d00e688167b2b9c6ea81">h</a> * IMAGE_HEIGHT);</div>
<div class="line"> </div>
<div class="line">            leftUpperPoint = cv::Point(x, y);</div>
<div class="line">            rightBottomPoint = cv::Point(x+width, y+height);</div>
<div class="line">            cv::rectangle(resized_img, leftUpperPoint, rightBottomPoint,</div>
<div class="line">                          color, RECTANGLE_BORDER_SIZE);</div>
<div class="line">            cv::putText(resized_img, std::to_string(obj.<a class="code" href="struct__AILIATrackerObject.html#ade1116e10ae8e26b2327f8b1e8911562">id</a>),</div>
<div class="line">                        leftUpperPoint, TEXT_FONT, TEXT_SIZE, TEXT_COLOR,</div>
<div class="line">                        TEXT_BORDER_SIZE);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">delete</span>[] ailiaTrackerObject;</div>
<div class="line">        <span class="comment">// Show result</span></div>
<div class="line">        cv::imshow(<span class="stringliteral">&quot;result frame&quot;</span>, resized_img);</div>
<div class="line">        <span class="keywordflow">if</span>(saveOutputVideo){</div>
<div class="line">            writer.write(resized_img);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    capture.release();</div>
<div class="line">    f(saveOutputVideo){</div>
<div class="line">        writer.release();</div>
<div class="line">    }</div>
<div class="line">    cv::destroyAllWindows();</div>
<div class="line">    <span class="comment">// Destroy AILIATracker instance</span></div>
<div class="line">    <a class="code" href="ailia__tracker_8h.html#a9bc13ee04ef51c965f64ad6748c1212e">ailiaTrackerDestroy</a>(ailiaTracker);</div>
<div class="line">    ailiaDestroyDetector(detector);</div>
<div class="line">    ailiaDestroy(ailia);</div>
<div class="line">}</div>
<div class="ttc" id="aailia__tracker_8h_html"><div class="ttname"><a href="ailia__tracker_8h.html">ailia_tracker.h</a></div></div>
<div class="ttc" id="aailia__tracker_8h_html_a109e7b4c6158ac1de4915fd2fc3c7bb2"><div class="ttname"><a href="ailia__tracker_8h.html#a109e7b4c6158ac1de4915fd2fc3c7bb2">AILIA_TRACKER_ALGORITHM_BYTE_TRACK</a></div><div class="ttdeci">#define AILIA_TRACKER_ALGORITHM_BYTE_TRACK</div><div class="ttdoc">ByteTrack.</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:43</div></div>
<div class="ttc" id="aailia__tracker_8h_html_a49d9807a95a319ba5e305358d50a413e"><div class="ttname"><a href="ailia__tracker_8h.html#a49d9807a95a319ba5e305358d50a413e">ailiaTrackerAddTarget</a></div><div class="ttdeci">int AILIA_API ailiaTrackerAddTarget(struct AILIATracker *tracker, const AILIADetectorObject *detector_object, int version)</div><div class="ttdoc">Set tracking target.</div></div>
<div class="ttc" id="aailia__tracker_8h_html_a7097f5ca5700fbc76152d655cf321077"><div class="ttname"><a href="ailia__tracker_8h.html#a7097f5ca5700fbc76152d655cf321077">ailiaTrackerGetObjectCount</a></div><div class="ttdeci">int AILIA_API ailiaTrackerGetObjectCount(struct AILIATracker *tracker, unsigned int *obj_count)</div><div class="ttdoc">Gets the number of detection results.</div></div>
<div class="ttc" id="aailia__tracker_8h_html_a84ba2dbe1f25e2b761f818464ab26bee"><div class="ttname"><a href="ailia__tracker_8h.html#a84ba2dbe1f25e2b761f818464ab26bee">AILIA_TRACKER_FLAG_NONE</a></div><div class="ttdeci">#define AILIA_TRACKER_FLAG_NONE</div><div class="ttdoc">Default flag.</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:202</div></div>
<div class="ttc" id="aailia__tracker_8h_html_a9bc13ee04ef51c965f64ad6748c1212e"><div class="ttname"><a href="ailia__tracker_8h.html#a9bc13ee04ef51c965f64ad6748c1212e">ailiaTrackerDestroy</a></div><div class="ttdeci">int AILIA_API ailiaTrackerDestroy(struct AILIATracker *tracker)</div><div class="ttdoc">It destroys the AILIATracker instance.</div></div>
<div class="ttc" id="aailia__tracker_8h_html_aae45adaf13ec56adb65810527204ef06"><div class="ttname"><a href="ailia__tracker_8h.html#aae45adaf13ec56adb65810527204ef06">ailiaTrackerCreate</a></div><div class="ttdeci">int AILIA_API ailiaTrackerCreate(struct AILIATracker **tracker, int algorithm, const AILIATrackerSettings *settings, int version, int flags)</div><div class="ttdoc">Creates a AILIATracker instance.</div></div>
<div class="ttc" id="aailia__tracker_8h_html_ae155bdb6d119771ae2cb32df912b6683"><div class="ttname"><a href="ailia__tracker_8h.html#ae155bdb6d119771ae2cb32df912b6683">ailiaTrackerCompute</a></div><div class="ttdeci">int AILIA_API ailiaTrackerCompute(struct AILIATracker *tracker)</div><div class="ttdoc">Perform tracking.</div></div>
<div class="ttc" id="aailia__tracker_8h_html_af5dc9c6782b9179c72444519cff8d2de"><div class="ttname"><a href="ailia__tracker_8h.html#af5dc9c6782b9179c72444519cff8d2de">AILIA_TRACKER_SETTINGS_VERSION</a></div><div class="ttdeci">#define AILIA_TRACKER_SETTINGS_VERSION</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:112</div></div>
<div class="ttc" id="aailia__tracker_8h_html_af7a0d43b216df3d8288add419c8c3a05"><div class="ttname"><a href="ailia__tracker_8h.html#af7a0d43b216df3d8288add419c8c3a05">ailiaTrackerGetObject</a></div><div class="ttdeci">int AILIA_API ailiaTrackerGetObject(struct AILIATracker *tracker, AILIATrackerObject *obj, unsigned int index, unsigned int version)</div><div class="ttdoc">Gets the detection results.</div></div>
<div class="ttc" id="astruct__AILIATrackerObject_html"><div class="ttname"><a href="struct__AILIATrackerObject.html">_AILIATrackerObject</a></div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:50</div></div>
<div class="ttc" id="astruct__AILIATrackerObject_html_a15fe8922813314eca61f527084eb2a97"><div class="ttname"><a href="struct__AILIATrackerObject.html#a15fe8922813314eca61f527084eb2a97">_AILIATrackerObject::x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:82</div></div>
<div class="ttc" id="astruct__AILIATrackerObject_html_a3e67b6d20003d00e688167b2b9c6ea81"><div class="ttname"><a href="struct__AILIATrackerObject.html#a3e67b6d20003d00e688167b2b9c6ea81">_AILIATrackerObject::h</a></div><div class="ttdeci">float h</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:106</div></div>
<div class="ttc" id="astruct__AILIATrackerObject_html_a3ebe3b644806e6c56c0ce3e1706a942d"><div class="ttname"><a href="struct__AILIATrackerObject.html#a3ebe3b644806e6c56c0ce3e1706a942d">_AILIATrackerObject::category</a></div><div class="ttdeci">unsigned int category</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:66</div></div>
<div class="ttc" id="astruct__AILIATrackerObject_html_a47cb64467afdff2077ebc6b81d7b1d30"><div class="ttname"><a href="struct__AILIATrackerObject.html#a47cb64467afdff2077ebc6b81d7b1d30">_AILIATrackerObject::w</a></div><div class="ttdeci">float w</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:98</div></div>
<div class="ttc" id="astruct__AILIATrackerObject_html_ab0c76416c234516e7f313644b956ffae"><div class="ttname"><a href="struct__AILIATrackerObject.html#ab0c76416c234516e7f313644b956ffae">_AILIATrackerObject::y</a></div><div class="ttdeci">float y</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:90</div></div>
<div class="ttc" id="astruct__AILIATrackerObject_html_ade1116e10ae8e26b2327f8b1e8911562"><div class="ttname"><a href="struct__AILIATrackerObject.html#ade1116e10ae8e26b2327f8b1e8911562">_AILIATrackerObject::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:58</div></div>
<div class="ttc" id="astruct__AILIATrackerSettings_html"><div class="ttname"><a href="struct__AILIATrackerSettings.html">_AILIATrackerSettings</a></div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:114</div></div>
<div class="ttc" id="astruct__AILIATrackerSettings_html_a609f06d183fc96c21673e5305b4fb09c"><div class="ttname"><a href="struct__AILIATrackerSettings.html#a609f06d183fc96c21673e5305b4fb09c">_AILIATrackerSettings::nms_threshold</a></div><div class="ttdeci">float nms_threshold</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:139</div></div>
<div class="ttc" id="astruct__AILIATrackerSettings_html_a8c843247b100c3ceb2d4935dbc3e5f77"><div class="ttname"><a href="struct__AILIATrackerSettings.html#a8c843247b100c3ceb2d4935dbc3e5f77">_AILIATrackerSettings::score_threshold</a></div><div class="ttdeci">float score_threshold</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:126</div></div>
<div class="ttc" id="astruct__AILIATrackerSettings_html_add8c33cfbfb077419bfeeec4e71e229a"><div class="ttname"><a href="struct__AILIATrackerSettings.html#add8c33cfbfb077419bfeeec4e71e229a">_AILIATrackerSettings::match_threshold</a></div><div class="ttdeci">float match_threshold</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:186</div></div>
<div class="ttc" id="astruct__AILIATrackerSettings_html_ae094831bfd443dbd115bf5f64a9d1d5a"><div class="ttname"><a href="struct__AILIATrackerSettings.html#ae094831bfd443dbd115bf5f64a9d1d5a">_AILIATrackerSettings::track_buffer</a></div><div class="ttdeci">int track_buffer</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:171</div></div>
<div class="ttc" id="astruct__AILIATrackerSettings_html_affd84c6b8a0772cbddbfd29bd88822c0"><div class="ttname"><a href="struct__AILIATrackerSettings.html#affd84c6b8a0772cbddbfd29bd88822c0">_AILIATrackerSettings::track_threshold</a></div><div class="ttdeci">float track_threshold</div><div class="ttdef"><b>Definition:</b> ailia_tracker.h:158</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
ailia Tracker Parameters</h2>
<p>Byte Track, the tracking algorithm used by ailia Tracker, performs tracking based solely on the shape of the bounding box using a Kalman filter. Image features are not used.</p>
<div class="fragment"><div class="line">1. Obtain detection results  </div>
<div class="line">  ↓  </div>
<div class="line">2. Filter out low‑score detections using **score_threshold**  </div>
<div class="line">  ↓  </div>
<div class="line">3. Remove duplicate detections using **nms_threshold** (Non‑Maximum Suppression)  </div>
<div class="line">  ↓  </div>
<div class="line">4. Select high‑confidence detections (scores ≥ **track_threshold**)  </div>
<div class="line">  as candidates for the **first‑stage matching**  </div>
<div class="line">  ↓  </div>
<div class="line">5. Use **match_threshold** to perform IoU‑based matching  </div>
<div class="line">  → Associate tracks from the previous frame with detections in the current frame  </div>
<div class="line">  ↓  </div>
<div class="line">6. For tracks that were not matched in the first stage,  </div>
<div class="line">  attempt **second‑stage matching** using lower‑score detections  </div>
<div class="line">  (scores between **score_threshold** and **track_threshold**)  </div>
<div class="line">  if their IoU is sufficiently high.  </div>
<div class="line">  → **match_threshold** is also applied in this step.  </div>
<div class="line">  ↓  </div>
<div class="line">7. Manage lost tracks using **track_buffer**,  </div>
<div class="line">  which defines how long a track is retained after being lost  </div>
</div><!-- fragment --><p>The configurable parameters are shown below.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>score_threshold</b>   </td><td class="markdownTableBodyNone">The lower limit of the score (confidence) used to determine whether to accept a detection result. Objects with detection scores below this value are excluded from tracking. Increasing the value will handle only reliable detections, while decreasing it will retain detections that may include noise.<br  />
<b>Default: 0.1</b>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>nms_threshold</b>   </td><td class="markdownTableBodyNone">The NMS (Non-Maximum Suppression) threshold used to remove duplicate detections. Detections whose IoU (overlap between objects) exceeds this value are considered to be the same object, and only the one with the highest score will remain. A smaller value removes duplicate detections more strictly, while a larger value makes it more lenient.<br  />
<b>Default: 0.7</b>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>track_threshold</b>   </td><td class="markdownTableBodyNone">The confidence threshold used when updating active tracks. Normally, only detections with scores above this value are used to update tracks. However, in the ByteTrack algorithm, detections with lower scores (between <code>score_threshold</code> and this threshold) may also be used for updates if their IoU with an existing track is sufficiently high. A higher value makes tracking stricter, while a lower value allows temporarily low‑confidence objects to be maintained.<br  />
<b>Default: 0.5</b>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>track_buffer</b>   </td><td class="markdownTableBodyNone">The maximum number of frames to keep a lost object track. If the same object is detected again within the specified number of frames, tracking resumes. Increasing this value retains lost objects longer, while decreasing it ends tracking sooner.<br  />
<b>Default: 30</b>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>match_threshold</b>   </td><td class="markdownTableBodyNone">The IoU (Intersection over Union) threshold for associating objects between frames. When the IoU is equal to or greater than this value, the track from the previous frame and the detection from the current frame are considered to be the same object. Increasing the value makes matching stricter, while decreasing it makes it more lenient.<br  />
<b>Default: 0.8</b>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md7"></a>
ailia Tracker Flags</h2>
<p>By default, it operates in a mode optimized for human detection. According to the standard Byte Track algorithm, images with an aspect ratio of 1.6 or greater (wider than tall) are excluded from tracking.</p>
<p>By specifying AILIA_TRACKER_FLAG_ALLOW_WIDE_ASPECT_RATIO, wide images can also be included in tracking. This is useful for tasks such as vehicle detection. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
